---
interface Props {
  id: string;
  title: string;
  titleKo?: string;
  category: string;
  status: string;
  description: string;
  descriptionKo?: string;
  tags?: string[];
}

const {
  id,
  title,
  titleKo,
  category,
  status,
  description,
  descriptionKo,
  tags = [],
} = Astro.props;

const statusColors: Record<string, string> = {
  'best-practice': 'bg-green-500/20 text-green-400 border-green-500/30',
  'validated-in-production': 'bg-blue-500/20 text-blue-400 border-blue-500/30',
  'established': 'bg-purple-500/20 text-purple-400 border-purple-500/30',
  'emerging': 'bg-yellow-500/20 text-yellow-400 border-yellow-500/30',
  'proposed': 'bg-gray-500/20 text-gray-400 border-gray-500/30',
  'experimental-but-awesome': 'bg-pink-500/20 text-pink-400 border-pink-500/30',
  'rapidly-improving': 'bg-orange-500/20 text-orange-400 border-orange-500/30',
};

const statusColor = statusColors[status] || statusColors['proposed'];
---

<div
  class="pattern-card bg-dark-card border border-dark-border rounded-lg overflow-hidden hover:border-primary-500/50 transition-all duration-300 group cursor-pointer"
  data-pattern-id={id}
  data-category={category}
  data-tags={tags.join(',')}
  data-title={title}
  data-title-ko={titleKo}
  data-description={description}
  data-description-ko={descriptionKo}
>
  <div class="p-5">
    <!-- Header -->
    <div class="flex items-start justify-between gap-3 mb-3">
      <h3 class="card-title font-semibold text-lg group-hover:text-primary-400 transition-colors">
        <span data-lang="ko">{titleKo || title}</span>
        <span data-lang="en" style="display:none;">{title}</span>
      </h3>
      <span class={`text-xs px-2 py-1 rounded border whitespace-nowrap flex-shrink-0 ${statusColor}`}>
        {status}
      </span>
    </div>

    <!-- Description -->
    <p class="card-description text-dark-muted text-sm mb-4 line-clamp-3">
      <span data-lang="ko">{descriptionKo || description}</span>
      <span data-lang="en" style="display:none;">{description}</span>
    </p>

    <!-- Tags -->
    {tags.length > 0 && (
      <div class="flex flex-wrap gap-1.5">
        {tags.slice(0, 3).map(tag => (
          <span class="text-xs px-2 py-0.5 rounded bg-dark-border text-dark-muted">
            #{tag}
          </span>
        ))}
        {tags.length > 3 && (
          <span class="text-xs px-2 py-0.5 text-dark-muted">
            +{tags.length - 3}
          </span>
        )}
      </div>
    )}

    <!-- Click hint -->
    <div class="mt-3 text-xs text-dark-muted opacity-0 group-hover:opacity-100 transition-opacity">
      <span data-lang="ko">클릭하여 상세 보기</span>
      <span data-lang="en" style="display:none;">Click for details</span>
    </div>
  </div>
</div>

<style>
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
